# File: nginx/default.conf (Tạm thời)

# Khối server này bắt tất cả traffic HTTP (port 80)
server {
    listen 80;
    server_name tradegpt.live www.tradegpt.live;

    # Xử lý xác thực của Certbot
    # Dòng root ở đây là quan trọng nhất cho việc xác thực
    location /.well-known/acme-challenge/ {
        root /var/www/certbot;
    }

    # Tạm thời comment dòng chuyển hướng này để dễ debug
     location / {
         return 301 https://$host$request_uri;
     }
}

# ==============================================================
# TẠM THỜI VÔ HIỆU HÓA TOÀN BỘ KHỐI DƯỚI ĐÂY BẰNG CÁCH THÊM #
# ==============================================================

 server {
     listen 443 ssl;
     server_name tradegpt.live www.tradegpt.live;

     ssl_certificate /etc/letsencrypt/live/tradegpt.live/fullchain.pem;
     ssl_certificate_key /etc/letsencrypt/live/tradegpt.live/privkey.pem;

     include /etc/letsencrypt/options-ssl-nginx.conf;
     ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;

     root /usr/share/nginx/html;
     index index.html;

     location / {
         try_files $uri $uri/ /index.html;
     }
 }
